{
  "family": "${task_def_family}",
  "taskRoleArn": "${taskrolearn}",
  "executionRoleArn": "${executionrolearn}",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "${taskcpu}",
  "memory": "${taskmemory}",
  "containerDefinitions": [
    {
      "name": "${appcontainername}",
      "image": "REPLACE_WITH_YOUR_IMAGE_URI",
      "cpu": 0,
      "memory": 512,
      "essential": true,
      "portMappings": [
        {
          "containerPort": 8000,
          "hostPort": 8000,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {
          "name": "DT_LOG",
          "value": "${DT_LOG}"
        },
        {
          "name": "DT_TENANT",
          "value": "${DT_TENANT}"
        },
        {
          "name": "DT_TENANTTOKEN",
          "value": "${DT_TENANTTOKEN}"
        },
        {
          "name": "TW_CONTAINER_NAME",
          "value": "${appcontainername}"
        },
        {
          "name": "JAVA_TOOL_OPTIONS",
          "value": "${JAVA_TOOL_OPTIONS}"
        },
        {
          "name": "DT_CUSTOM_PROP",
          "value": "${DT_CUSTOM_PROP}"
        },
        {
          "name": "PRIVATE_BUCKET",
          "value": "${PRIVATE_BUCKET}"
        },
        {
          "name": "spring.profiles.active",
          "value": "${SPRING_PROFILES_ACTIVE}"
        },
        {
          "name": "DT_CONNECTION_POINT",
          "value": "${DT_CONNECTION_POINT}"
        },
        {
          "name": "REGION",
          "value": "${awsregion}"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/aws/ecs/${cluster_name}/${appcontainername}",
          "awslogs-create-group": "true",
          "awslogs-region": "${awsregion}",
          "awslogs-stream-prefix": "${appcontainername}"
        }
      }
    }
  ]
} 